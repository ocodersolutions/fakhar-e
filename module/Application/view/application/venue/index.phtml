<?php
        echo $this->headScript()->appendFile($this->basePath() . '/assets/js/tree.jquery.js')
                                ;
        ?>
<?php echo $this->headLink()
                 ->appendStylesheet($this->basePath() . '/assets/css/jqtree.css');
 ?> 
<?php
	$listAttrValue = $this->listAttrValue;
?>

<div class="row" id="venue_style_page">
	<div class="venue_cat col-lg-2 col-lg-offset-1 col-sm-3">
	<div class="venue_cat_wrap">
		<h5>Venues</h5>
		<div id="tree1"></div>
	</div>
		
	</div>
	<div class="venue_main_content col-lg-8 col-sm-9">
		<h3 class="row"><?php echo $this->venue_name ;?></h3>
		<?php 
		$style_arr = $this->style_attr;
		foreach( $style_arr as $style_name=>$style_attr ){?>
			<div class="row style_item">
				<div class="style_left col-lg-3 col-sm-3 ">
					<p><?php  echo $style_name ?></p>
				</div>
				<div class="style_des_right col-lg-8 col-sm-8 ">
				<?php foreach ($style_attr as $AtrrName => $Atrrvalue) {
					?><p><?php echo $AtrrName ?> <span> <?php echo $Atrrvalue ?></span></p><?php
				} ?>
					
				</div>
			</div>
		<?php }?>
		<!-- <div class="row style_item">
			<div class="style_left col-lg-3 col-sm-3 ">
				<p>Style 1</p>
			</div>
			<div class="style_des_right col-lg-8 col-sm-8 ">
				<p>Color <span> Red ,Green</span></p>
				
				<p>Brand <span> Brand 1 ,Brand 2</span></p>
				
			</div>
		</div>
		<div class="row style_item">
			<div class="style_left col-lg-3 col-sm-3">
				<p>Style 2</p>
			</div>
			<div class="style_des_right col-lg-8 col-sm-8">
				<p>Color <span> Red ,Green</span></p>
				<p>Brand <span> Brand 1 ,Brand 2</span></p>
			</div>
		</div> -->
		<div class="row style_item" id="pick_style_row">
			<div class="style_left pick_style col-lg-5 col-sm-5">
				<p>Pick Styles</p>
				<select data-placeholder="Choose a country..." style="width:100%" class="chosen-select">

					<option selected disabled >Select</option>
					<?php foreach($listAttrValue as $strrid=>$attr ){ ?>
						<option value="<?php echo $attr;?>" data-styleId="<?php echo $strrid ?>"> <?php echo $attr;?></option>
					<?php }  ?>
					
				</select>
				<input type="hidden" id="getstyleid" name="hiddenStyleid" value="">
			</div>
			<div class="style_des_right col-lg-7 col-sm-7">
				<!-- <p>Color <span> Red ,Green</span></p>
				<p>Brand <span> Brand 1 ,Brand 2</span></p> -->
				<button type="button" class="btn-st-blue btn-primary" name="add_style" id="add_style">Add</button>
			</div>
		</div>
	</div>
</div>
<script>
var data = [
    <?php 
		$data_tree = $this->data_tree;
		echo $data_tree;
	?>
];
$(function() {
    $('#tree1').tree({
        data: data,
        selectable: true,
        closedIcon: $('<i class="fa fa-plus"/>'),
    	openedIcon: $('<i class="fa fa-minus"/>'),
        onCreateLi: function(node, $li) {
        	var a = $li.find('span')[0];
        	a.outerHTML = '<a href="' + node.url + '">' + a.outerHTML + '</a>';
        }
    });
    $(".chosen-select").chosen(); 
    $(".chosen-select").chosen().change(function(){
		     selectedValue = $(this).find("option:selected").data('styleid');
		     $("input[name='hiddenStyleid']").val(selectedValue);
		});
    $(".venue_cat_wrap h5").click(function(){
    	$(this).parent('.venue_cat_wrap').toggleClass('open');
    	
    });
});
$(function() {
	$("#add_style").click(function(event) {
		styleid = $("input[name='hiddenStyleid']").val();
		//venueid = <?php echo $this->venue_id;?>;
		//alert(id);
		$.ajax({
		url : "/venue/savestylevenue",
        type : "post",
        // dataType:"text",
        data : {
            'styleId' : styleid,
            'venueid' : venueid,
        },
        success:function(){

        }
		});
	});
});
</script>
